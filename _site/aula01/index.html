<!DOCTYPE html>
<html>

  <head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Aula 01 - Noções básicas</title>
	<meta name="description" content="Slides dessa aula">
	
	<link rel="canonical" href="http://curso-r.github.io/versao2016//aula01/">
	<link rel="alternate" type="application/rss+xml" title="Curso-R 2016" href="http://curso-r.github.io/versao2016//feed.xml" />
	
	<!-- <link rel="stylesheet" href="/css/main.css"> -->

	<link rel="stylesheet" type="text/css" href="http://apps.bdimg.com/libs/bootstrap/3.3.0/css/bootstrap.min.css">
	<!-- <link rel="stylesheet" type="text/css" href="http://apps.bdimg.com/libs/fontawesome/4.2.0/css/font-awesome.min.css"> -->
	<!-- <link rel="stylesheet" type="text/css" href="/static/css/bootstrap.min.css"> -->
	

	<link rel="stylesheet" type="text/css" href="/static/css/index.css">
	
	<!-- <script type="text/javascript" src="/static/js/jquery-1.11.1.min.js"></script>
	<script type="text/javascript" src="/static/js/bootstrap.min.js"></script> -->

	<script type="text/javascript" src="http://apps.bdimg.com/libs/jquery/2.1.1/jquery.min.js"></script>
	<script type="text/javascript" src="http://apps.bdimg.com/libs/bootstrap/3.3.0/js/bootstrap.min.js"></script>

	<script type="text/javascript" src="/static/js/index.js"></script>
	
	<link rel="stylesheet" type="text/css" href="http://apps.bdimg.com/libs/highlight.js/8.4/styles/monokai_sublime.min.css">
	<!-- <link rel="stylesheet" type="text/css" href="http://apps.bdimg.com/libs/highlight.js/8.4/styles/railscasts.min.css"> -->
	<!-- <link rel="stylesheet" type="text/css" href="http://apps.bdimg.com/libs/highlight.js/8.4/styles/monokai.min.css"> -->
	<!-- <script type="text/javascript" src="http://apps.bdimg.com/libs/highlight.js/8.4/languages/dos.min.js"></script> -->
	<script type="text/javascript" src="http://apps.bdimg.com/libs/highlight.js/8.4/highlight.min.js"></script>
	<script>hljs.initHighlightingOnLoad();</script>

</head>

 <!--  <body data-spy="scroll" data-target="#myAffix"> -->
  <body>

    <header>

<!-- navbar -->
  <nav class="navbar navbar-inverse">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">Curso-R 2016</a>
      <p class="navbar-text"></p>
    </div>
    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav navbar-right">

        
          <li>
        
        <a href="/"><span class="glyphicon glyphicon-th-large"></span> Blog</a></li>

        
          
            
              <li>
            
            <a href="/projects/"><span class="glyphicon glyphicon-file"></span> Projects</a></li>
          
        
          
            
              <li>
            
            <a href="/about/"><span class="glyphicon glyphicon-heart"></span> About</a></li>
          
        
          
        
          
        
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

</header>

    <div id="main" class="container main">
      <div class="row">
  <div id="myArticle" class="col-sm-9">
    <div class="post-area post">
      <header>
        <h1>Aula 01 - Noções básicas</h1>
        <p>Jan 15, 2015</p>
      </header>
      <hr>
      <article>
        <p><a href="http://curso-r.github.io/slides/aula_00_01_apresentacao.html" target="_blank">Slides dessa aula</a></p>

<p><a href="http://curso-r.github.io/script/aula_00_01_script.R" target="_blank">Script dessa aula</a></p>

<h1 id="r-como-calculadora">R como calculadora</h1>

<p>A linguagem do R é um tanto quanto intuitiva, muita coisa sai do jeito certo no chute! Para ver um exemplo disso, é interessante começar fazendo do R uma grande calculadora. Tente jogar no console <code>2*2 - (4 + 4)/2</code>. Pronto. Com essa simples expressão você já é capaz de imaginar (e certeiramente) como pedir ao R para fazer qualquer tipo de operação aritmética. Lição aprendida!</p>

<p>Além do mais, as operações e suas precedências são mantidas como na matemática, ou seja, divisão e multiplicação são calculadas antes da adição e subtração. E os parênteses nunca são demais!</p>

<p>Falando em matemática, o $\pi$ já vem definido!</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kc">pi</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] 3.141593</code></pre></div>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kp">sin</span><span class="p">(</span><span class="kc">pi</span><span class="o">/</span><span class="m">2</span><span class="p">)</span> <span class="o">+</span> <span class="m">2</span><span class="o">*</span><span class="m">3</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] 7</code></pre></div>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="p">(</span><span class="kp">sin</span><span class="p">(</span><span class="kc">pi</span><span class="o">/</span><span class="m">2</span><span class="p">)</span> <span class="o">+</span> <span class="m">2</span><span class="p">)</span><span class="o">*</span><span class="m">3</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] 9</code></pre></div>

<p>Veja que apareceu a função <code>sin()</code>, o famoso seno. Tente outras funções trigonométricas para ver se acerta de prima!</p>

<p>Mas a ideia é essa. Ser intuitivo. A dica aqui é tentar! No R, um erro não é nenhuma dor de cabeça, é rápido consertar e testar (<strong>debugar</strong>, para os mais íntimos).</p>

<h2 id="valores-especiais">Valores especiais</h2>

<p>Certas operações matemáticas podem suscitar em valores não numéricos. Exemplo disso são log de números negativos e divisões por zero. Para tais operações, o R reservou valores especiais para serem retornadas quando operações não resultarem em um número propriamente dito. A tabela abaixo lista esses objetos:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Valor</th>
      <th style="text-align: center">Quando.ocorre</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">Inf/-Inf</td>
      <td style="text-align: center">Divisões por zero, valores da ordem de 10^308</td>
    </tr>
    <tr>
      <td style="text-align: center">NaN</td>
      <td style="text-align: center">Indeterminações matemáticas, como 0/0 e log(-1)</td>
    </tr>
  </tbody>
</table>

<h2 id="operadores-aritmticos">Operadores aritméticos</h2>

<p>Os bons e conhecidos operadores aritméticos. Com números reais eles funcionam como na matemática, mas ao saírmos da reta, eles podem fazer muito mais!</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Operador</th>
      <th style="text-align: center">Descrição</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">x + y</td>
      <td style="text-align: center">Adição de x com y</td>
    </tr>
    <tr>
      <td style="text-align: center">x - y</td>
      <td style="text-align: center">Subtração de y em x</td>
    </tr>
    <tr>
      <td style="text-align: center">x * y</td>
      <td style="text-align: center">Multiplicação de x e y</td>
    </tr>
    <tr>
      <td style="text-align: center">x / y</td>
      <td style="text-align: center">Divisão de x por y</td>
    </tr>
    <tr>
      <td style="text-align: center">x^y ou x**y</td>
      <td style="text-align: center">x elevado a y-ésima potência</td>
    </tr>
    <tr>
      <td style="text-align: center">x%%y</td>
      <td style="text-align: center">Resto da divisão de x por y (módulo)</td>
    </tr>
    <tr>
      <td style="text-align: center">x%/%y</td>
      <td style="text-align: center">Parte inteira da divisão de x por y</td>
    </tr>
  </tbody>
</table>

<p>Exemplos:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="m">1</span> <span class="o">+</span> <span class="m">1</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] 2</code></pre></div>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="m">10</span> <span class="o">-</span> <span class="m">8</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] 2</code></pre></div>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="m">2</span><span class="o">*</span><span class="m">10</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] 20</code></pre></div>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="m">18</span><span class="o">/</span><span class="m">3</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] 6</code></pre></div>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="m">2</span><span class="o">^</span><span class="m">4</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] 16</code></pre></div>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="m">9</span><span class="o">%%</span><span class="m">2</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] 1</code></pre></div>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="m">9</span><span class="o">%/%</span><span class="m">2</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] 4</code></pre></div>

<h2 id="operadores-lgicos">Operadores lógicos</h2>

<p>Operadores lógicos retornarão sempre ou <code>TRUE</code> ou <code>FALSE</code>. Eles definem perguntas que aceitam apenas verdadeiro e falso como resposta, como sugere o quadro abaixo.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">operador</th>
      <th style="text-align: center">descricao</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">x &lt; y</td>
      <td style="text-align: center">x menor que y?</td>
    </tr>
    <tr>
      <td style="text-align: center">x &lt;= y</td>
      <td style="text-align: center">x menor ou igual a y?</td>
    </tr>
    <tr>
      <td style="text-align: center">x &gt; y</td>
      <td style="text-align: center">x maior que y?</td>
    </tr>
    <tr>
      <td style="text-align: center">x &gt;= y</td>
      <td style="text-align: center">x maior ou igual a y?</td>
    </tr>
    <tr>
      <td style="text-align: center">x == y</td>
      <td style="text-align: center">x igual a y?</td>
    </tr>
    <tr>
      <td style="text-align: center">x != y</td>
      <td style="text-align: center">x diferente de y?</td>
    </tr>
    <tr>
      <td style="text-align: center">!x</td>
      <td style="text-align: center">Negativa de x</td>
    </tr>
    <tr>
      <td style="text-align: center">x | y</td>
      <td style="text-align: center">x ou y são verdadeiros?</td>
    </tr>
    <tr>
      <td style="text-align: center">x &amp; y</td>
      <td style="text-align: center">x e y são verdadeiros?</td>
    </tr>
    <tr>
      <td style="text-align: center">xor(x, y)</td>
      <td style="text-align: center">x ou y são verdadeiros (apenas um deles)?</td>
    </tr>
  </tbody>
</table>

<p>Exemplos:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Teste</th>
      <th style="text-align: center">Resposta</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">1 &lt; 1</td>
      <td style="text-align: center">FALSE</td>
    </tr>
    <tr>
      <td style="text-align: center">1 &lt;= 1</td>
      <td style="text-align: center">TRUE</td>
    </tr>
    <tr>
      <td style="text-align: center">1 == 0.999</td>
      <td style="text-align: center">FALSE</td>
    </tr>
    <tr>
      <td style="text-align: center">1 == 0.99999999999999999</td>
      <td style="text-align: center">TRUE</td>
    </tr>
    <tr>
      <td style="text-align: center">13.5 != 13.5</td>
      <td style="text-align: center">FALSE</td>
    </tr>
    <tr>
      <td style="text-align: center">!TRUE</td>
      <td style="text-align: center">FALSE</td>
    </tr>
    <tr>
      <td style="text-align: center">TRUE | FALSE</td>
      <td style="text-align: center">TRUE</td>
    </tr>
    <tr>
      <td style="text-align: center">FALSE | FALSE</td>
      <td style="text-align: center">FALSE</td>
    </tr>
    <tr>
      <td style="text-align: center">TRUE &amp; FALSE</td>
      <td style="text-align: center">FALSE</td>
    </tr>
    <tr>
      <td style="text-align: center">TRUE &amp; TRUE</td>
      <td style="text-align: center">TRUE</td>
    </tr>
    <tr>
      <td style="text-align: center">xor(TRUE, TRUE)</td>
      <td style="text-align: center">FALSE</td>
    </tr>
    <tr>
      <td style="text-align: center">xor(TRUE, FALSE)</td>
      <td style="text-align: center">TRUE</td>
    </tr>
    <tr>
      <td style="text-align: center">TRUE == 1</td>
      <td style="text-align: center">TRUE</td>
    </tr>
    <tr>
      <td style="text-align: center">TRUE == 2</td>
      <td style="text-align: center">FALSE</td>
    </tr>
    <tr>
      <td style="text-align: center">FALSE == 0</td>
      <td style="text-align: center">TRUE</td>
    </tr>
  </tbody>
</table>

<h2 id="nmeros-complexos">Números complexos</h2>

<p>O R manipula números complexo de maneira fácil e intuitiva do mesmo jeito que trata os números reais. Além disso, disponibiliza funções úteis para eles, como módulo, conjugado e argumento.</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">z <span class="o">&lt;-</span> <span class="m">-8</span> <span class="o">+</span> <span class="m">0i</span>

<span class="c1"># verifica se z é um número commplexo</span>
<span class="kp">class</span><span class="p">(</span>z<span class="p">)</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] &quot;complex&quot;</code></pre></div>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kp">is.complex</span><span class="p">(</span>z<span class="p">)</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] TRUE</code></pre></div>

<p>A tabela abaixo resume algumas funções interessantes para números complexos.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Função</th>
      <th style="text-align: center">Descrição</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">Re(z)</td>
      <td style="text-align: center">Parte real de z</td>
    </tr>
    <tr>
      <td style="text-align: center">Im(z)</td>
      <td style="text-align: center">Parte imaginária de z</td>
    </tr>
    <tr>
      <td style="text-align: center">Mod(z)</td>
      <td style="text-align: center">Módulo de z</td>
    </tr>
    <tr>
      <td style="text-align: center">Arg(z)</td>
      <td style="text-align: center">Argumento de z</td>
    </tr>
    <tr>
      <td style="text-align: center">Conj(z)</td>
      <td style="text-align: center">Complexo conjugado de z</td>
    </tr>
  </tbody>
</table>

<p>Demais funções matemáticas, como logaritmo, funções trigonométricas, exponencial e radiciação também estão implementadas para números complexos.</p>

<h1 id="controle-de-fluxo-flow-controls">Controle de fluxo (<em>flow controls</em>)</h1>

<h2 id="sumrio">Sumário</h2>

<ul>
  <li>if, else, else if: testa uma condição</li>
  <li>for, while: “laços” ou iterações</li>
  <li>break, next: ações dentro de laços</li>
</ul>

<h2 id="if-else-e-else-if">if, else e else if</h2>

<h3 id="estrutura">Estrutura:</h3>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kr">if</span><span class="p">(</span><span class="o">&lt;</span>condição1<span class="o">&gt;</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1"># se a condição1 for verdadeira...</span>
  <span class="c1"># faz coisas interessantes.</span>
<span class="p">}</span> <span class="kr">else</span> <span class="kr">if</span> <span class="p">(</span><span class="o">&lt;</span>condição2<span class="o">&gt;</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1"># caso a condição1 seja falsa e a condição2 seja verdadeira...</span>
  <span class="c1"># faz coisas legais para este caso.</span>
<span class="p">}</span> <span class="kr">else</span> <span class="p">{</span>
  <span class="c1"># faz coisas necessárias caso todas as condições anteriores falharem</span>
<span class="p">}</span></code></pre></div>

<p>As condições devem ser expressões lógicas, ou seja, testes que retornem <code>TRUE</code> ou <code>FALSE</code>. Assim, o código entre <code>{}</code> será executado se a condição for <code>TRUE</code> ou será ignorada se a condição retornar <code>FALSE</code>.</p>

<h3 id="exemplo">Exemplo:</h3>

<div class="highlight"><pre><code class="language-r" data-lang="r">x <span class="o">&lt;-</span> <span class="m">4</span>

<span class="c1"># teste: x NÃO é um número?</span>
<span class="o">!</span><span class="kp">is.numeric</span><span class="p">(</span>x<span class="p">)</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] FALSE</code></pre></div>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># teste: x é menor que zero?</span>
x <span class="o">&lt;</span> <span class="m">0</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] FALSE</code></pre></div>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># teste: x é maior que zero?</span>
x <span class="o">&gt;</span> <span class="m">0</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] TRUE</code></pre></div>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kr">if</span><span class="p">(</span><span class="o">!</span><span class="kp">is.numeric</span><span class="p">(</span>x<span class="p">))</span> <span class="p">{</span>
  <span class="s">&quot;x não é um número&quot;</span>
<span class="p">}</span> <span class="kr">else</span> <span class="kr">if</span><span class="p">(</span>x <span class="o">&gt;</span> <span class="m">0</span><span class="p">)</span> <span class="p">{</span>
  <span class="s">&quot;x é positivo&quot;</span>
<span class="p">}</span> <span class="kr">else</span> <span class="kr">if</span><span class="p">(</span>x <span class="o">&lt;</span> <span class="m">0</span><span class="p">)</span> <span class="p">{</span>
  <span class="s">&quot;x é negativo&quot;</span>
<span class="p">}</span> <span class="kr">else</span> <span class="p">{</span>
  <span class="s">&quot;x é nulo&quot;</span>
<span class="p">}</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] &quot;x é positivo&quot;</code></pre></div>

<p>O que acontece no exemplo acima, passo a passo:</p>

<ol>
  <li>
    <p>A expressão <code>!is.numeric(x)</code> testa se <code>x</code> NÃO é um número. Como <code>x</code> vale 4, ele retorna <code>FALSE</code>. Assim, a expressão <code>{"x não é um número"}</code> não é executada e a próxima condição é testada;</p>
  </li>
  <li>
    <p>No primeiro <code>else if</code>, o teste lógico <code>x &gt; 0</code> retorna <code>TRUE</code>, fazendo com que a expressão <code>{"x é positivo"}</code> seja executada e todo o restante dos testes, ignorado.</p>
  </li>
</ol>

<p><strong>OBS:</strong> a condições <code>x &lt; 0</code> nunca chegou a ser testada. Uma vez encontrada uma condição verdadeira, o programa executa o respectivo bloco de códigos entre <code>{}</code> e descarta as demais instruções.</p>

<h3 id="consideraes">Considerações:</h3>

<ul>
  <li>O <code>else</code> e o <code>else if</code> têm que estar na mesma linha do <code>}</code> da expressão anterior, senão não rodará!</li>
</ul>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># Certo</span>
<span class="kr">if</span><span class="p">(</span><span class="m">1</span> <span class="o">==</span> <span class="m">2</span><span class="p">)</span> <span class="p">{</span>
  <span class="s">&quot;Um resultado muito interessante!&quot;</span>
<span class="p">}</span> <span class="kr">else</span> <span class="p">{</span> <span class="c1"># &lt;----- Mesma linha que o &quot;}&quot;</span>
  <span class="s">&quot;1 é diferente de 2&quot;</span>
<span class="p">}</span>

<span class="c1"># ERRADO!!! Não rodará</span>
<span class="kr">if</span><span class="p">(</span><span class="m">1</span> <span class="o">==</span> <span class="m">2</span><span class="p">)</span> <span class="p">{</span>
  <span class="s">&quot;Um resultado muito interessante!&quot;</span>
<span class="p">}</span>
<span class="kr">else</span> <span class="p">{</span> <span class="c1"># &lt;----- Na linha abaixo do &quot;}&quot;</span>
  <span class="s">&quot;1 é diferente de 2&quot;</span>
<span class="p">}</span></code></pre></div>

<ul>
  <li>Além de <code>TRUE</code> e <code>FALSE</code>, o R aceita <code>1</code> e <code>0</code>, respectivamente. Na verdade, não precisa ser <code>1</code> exatamente, a regra é:
    <ul>
      <li>número diferente de zero é <code>TRUE</code>; e</li>
      <li>número igual a zero é <code>FALSE</code>.</li>
    </ul>
  </li>
  <li>
    <p>Objetos <code>character</code>, <code>NA</code>, <code>NaN</code> e <code>list</code> não são interpretáveis como lógicos. Será retornado um erro caso tente passá-los como condições.</p>
  </li>
  <li>
    <p>Caso seja passado um <code>array</code>, <code>vector</code> ou <code>matrix</code>, será utilizado apenas o primeiro elemento (é melhor evitar usar arrays como condições!). Será enviado um aviso de que isso ocorreu.</p>
  </li>
  <li><code>else</code> e <code>else if</code> são opcionais.</li>
</ul>

<h2 id="for">for</h2>

<p>O <code>for</code> é um tipo “laço” (<em>loop</em>, em inglês) que aplica um bloco de código para um número fixo de iterações. Geralmente, um <code>for</code> percorre um vetor e utiliza um elemento diferente deste vetor em cada iteração.</p>

<h3 id="estrutura-1">Estrutura:</h3>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kr">for</span><span class="p">(</span>iterador <span class="kr">in</span> <span class="o">&lt;</span>sequencia<span class="o">&gt;</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1"># Fazer algo para cada item da &lt;sequencia&gt;</span>
  <span class="c1"># pode ter outros for&#39;s aqui dentro!</span>
<span class="p">}</span></code></pre></div>

<h3 id="exemplo-1">Exemplo:</h3>

<p>O uso mais simples é quando iteramos em um vetor de inteiros, como se fossem contadores.</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kr">for</span><span class="p">(</span>i <span class="kr">in</span> <span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="p">)</span> <span class="p">{</span>
  <span class="kp">print</span><span class="p">(</span>i<span class="p">)</span>
<span class="p">}</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5</code></pre></div>

<p>Mas podemos iterar em um vetor qualquer.</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">frutas <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;banana&quot;</span><span class="p">,</span> <span class="s">&quot;uva&quot;</span><span class="p">,</span> <span class="s">&quot;abacaxi&quot;</span><span class="p">)</span>

<span class="c1"># Brincadeira da &lt;fruta&gt; + &quot;guei&quot;</span>
<span class="kr">for</span><span class="p">(</span>fruta <span class="kr">in</span> frutas<span class="p">)</span> <span class="p">{</span>
  <span class="kp">print</span><span class="p">(</span><span class="kp">paste</span><span class="p">(</span>fruta<span class="p">,</span> <span class="s">&quot;guei&quot;</span><span class="p">,</span> sep <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">))</span>
<span class="p">}</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] &quot;bananaguei&quot;
## [1] &quot;uvaguei&quot;
## [1] &quot;abacaxiguei&quot;</code></pre></div>

<p>Para cada item do vetor <code>frutas</code>, o <code>for</code> atribuiu ao objeto <code>fruta</code> o valor do respectivo item e aplicou a função <code>print(paste(fruta, "guei", sep = ""))</code>.</p>

<p>Formas alternativas com o mesmo comportamento que o acima:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># repare nos []&#39;s depois do vetor &#39;frutas&#39;</span>
<span class="kr">for</span><span class="p">(</span>i <span class="kr">in</span> <span class="m">1</span><span class="o">:</span><span class="kp">length</span><span class="p">(</span>frutas<span class="p">))</span> <span class="p">{</span>
  <span class="kp">print</span><span class="p">(</span><span class="kp">paste</span><span class="p">(</span>frutas<span class="p">[</span>i<span class="p">],</span> <span class="s">&quot;guei&quot;</span><span class="p">,</span> sep <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">))</span>
<span class="p">}</span>

<span class="c1"># seq_along() é uma função especialmente útil para for&#39;s</span>
<span class="kr">for</span><span class="p">(</span>i <span class="kr">in</span> <span class="kp">seq_along</span><span class="p">(</span>frutas<span class="p">))</span> <span class="p">{</span>
  <span class="kp">print</span><span class="p">(</span><span class="kp">paste</span><span class="p">(</span>frutas<span class="p">[</span>i<span class="p">],</span> <span class="s">&quot;guei&quot;</span><span class="p">,</span> sep <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">))</span>
<span class="p">}</span></code></pre></div>

<p><strong>OBS</strong> Apesar de parecer mais ‘elegante’ atribuir diretamente os valores ao iterador (como no caso do <code>fruta in frutas</code>), muitas vezes você se pegará na necessidade de usar os índices dos valores. Casos típicos é quando se tem um outro vetor que faz relação com outro. O exemplo abaixo não seria possível caso utilizássemos <code>fruta in frutas</code> no lugar de <code>i in seq_along(frutas)</code>.</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># Exemplo simples de quando é util utilizar índice em vez de valor.</span>
frutas1 <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;banana&quot;</span><span class="p">,</span> <span class="s">&quot;uva&quot;</span><span class="p">,</span> <span class="s">&quot;abacaxi&quot;</span><span class="p">)</span>
frutas2 <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;kiwi&quot;</span><span class="p">,</span> <span class="s">&quot;uva&quot;</span><span class="p">,</span> <span class="s">&quot;laranja&quot;</span><span class="p">)</span>
pessoas <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;Amanda&quot;</span><span class="p">,</span> <span class="s">&quot;Bruno&quot;</span><span class="p">,</span> <span class="s">&quot;Caio&quot;</span><span class="p">)</span>

<span class="kr">for</span><span class="p">(</span>i <span class="kr">in</span> <span class="kp">seq_along</span><span class="p">(</span>frutas1<span class="p">))</span> <span class="p">{</span>
  <span class="kr">if</span><span class="p">(</span>frutas1<span class="p">[</span>i<span class="p">]</span> <span class="o">==</span> frutas2<span class="p">[</span>i<span class="p">])</span> <span class="p">{</span>
    frutas1<span class="p">[</span>i<span class="p">]</span> <span class="o">&lt;-</span> <span class="s">&quot;manga&quot;</span> <span class="c1"># Troca a fruta 1</span>
    <span class="kp">print</span><span class="p">(</span><span class="kp">paste</span><span class="p">(</span>pessoas<span class="p">[</span>i<span class="p">],</span> <span class="s">&quot;ganhou frutas repetidas. Uma delas foi trocada por manga.&quot;</span><span class="p">))</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] &quot;Bruno ganhou frutas repetidas. Uma delas foi trocada por manga.&quot;</code></pre></div>

<h3 id="ifelse-for-com-if-else"><em>ifelse()</em>: <em>for</em> com <em>if else</em></h3>

<p>Como veremos mais para frente, vetores são quase sempre bem-vindos no R. Muitas funções trabalham com vetores de maneira muito conveniente e a função <code>ifelse()</code> é um exemplo disso. Ela é a abordagem mais simples quando queremos que cada elemento de um vetor passe por algum teste lógico (como no exemplo acima) para retornar um valor dependendo se a condiçao for <code>TRUE</code> ou <code>FALSE</code> (como nunca é demais, dê um <code>?ifelse</code> para ver a documentação se for preciso). Abaixo está a replicação do exemplo acima, mas sem a mensagem de aviso.</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">frutas1 <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;banana&quot;</span><span class="p">,</span> <span class="s">&quot;uva&quot;</span><span class="p">,</span> <span class="s">&quot;abacaxi&quot;</span><span class="p">)</span>
frutas2 <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;kiwi&quot;</span><span class="p">,</span> <span class="s">&quot;uva&quot;</span><span class="p">,</span> <span class="s">&quot;laranja&quot;</span><span class="p">)</span>
pessoas <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;Amanda&quot;</span><span class="p">,</span> <span class="s">&quot;Bruno&quot;</span><span class="p">,</span> <span class="s">&quot;Caio&quot;</span><span class="p">)</span>

frutas1 <span class="o">&lt;-</span> <span class="kp">ifelse</span><span class="p">(</span>frutas1 <span class="o">==</span> frutas2<span class="p">,</span> <span class="s">&quot;manga&quot;</span><span class="p">,</span> frutas1<span class="p">)</span></code></pre></div>

<p>O código acima está dizendo que se os respectivos elementos de frutas1 e frutas2 calharem de serem iguais, então substitua por “manga”. Se forem diferentes, então mantenha a fruta 1 original. Finalmente, atualize o vetor <code>frutas1</code>.</p>

<p>Na parte de vetorização será descrita com mais detalhe o que está acontecendo por trás dos panos.</p>

<h3 id="consideraes-1">Considerações:</h3>

<p>O uso do <em>for</em>, ao contrário das outras linguagens de programação, se tornará cada vez menos frequente conforme você for se aprimorando no R. Ele é especialmente ineficiente no R e, além disso, existem outras funções que o substituem e ainda facilitam muito mais a vida.</p>

<h2 id="while">while</h2>

<p>O laço <code>while</code> é especialmente útil quando não sabemos quando iremos parar (a condição para o laço deixar de rodar pode envolver o acaso ou convergência, por exemplo). Cuidado com os <em>loops</em> infinitos! =)</p>

<h3 id="estrutura-2">Estrutura:</h3>

<p>A estrutura é muito similar ao <code>if</code>. Tem a condição (ou teste lógico) e a expressão a ser executada enquanto a condição for verdadeira.</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kr">while</span><span class="p">(</span><span class="o">&lt;</span>condições<span class="o">&gt;</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1"># coisas para fazzer enquanto as &lt;condições&gt; forem TRUE</span>
<span class="p">}</span></code></pre></div>

<h3 id="exemplo-2">Exemplo:</h3>
<p>Abaixo está uma simulação de lançamento de moedas do qual se tem interesse em saber quantos lançamentos foram necessários até o aparecimento de uma “cara”.</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">p <span class="o">&lt;-</span> <span class="m">0.2</span> <span class="c1"># probabilidade de cair &quot;cara&quot;</span>
lances <span class="o">&lt;-</span> <span class="m">0</span> <span class="c1"># contador de lançamentos</span>
<span class="kr">while</span><span class="p">(</span>runif<span class="p">(</span><span class="m">1</span><span class="p">)</span> <span class="o">&gt;</span> p<span class="p">)</span> <span class="p">{</span>
  lances <span class="o">&lt;-</span> lances <span class="o">+</span> <span class="m">1</span>
<span class="p">}</span>

lances</code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] 8</code></pre></div>

<p>A função <code>runif(1)</code> gera um número aleatório no intervalo unitário toda vez que a condição é avaliada. Se este número for maior que <code>p</code>, então a moeda e lançada novamente e o contador de lançamentos é incrementado em uma unidade e esse ciclo se repete até que, por acaso, o número sorteado seja menor que <code>p</code>. No fim, teremos nossa desejada variável aleatória simulada de lances até “cara”.</p>

<p>Repare que enquanto a condição retornava <code>TRUE</code>, a expressão sera reexecutada. O laço só parou quando a condição retornou <code>FALSE</code>. Essa é a regra do <code>while</code>.</p>

<h1 id="vetorizao">Vetorização</h1>

<p>Vetores no R são cadeias ordenadas de elementos (geralmente números ou palavras) e são os objetos de maior interesse porque são eles que guardam os dados a serem analisados. Por essa razão que quase tudo feito no R aceita de braços abertos um “vetor” (entre aspas por que “vetor” aqui pode ser vetor, matriz, tabela e afins, tipos de objetos que serão explicados em detalhes na próxima aula).</p>

<p>Se você é novo no mundo da programação, não vai sentir muito a vantagem desse conceito. Aos que já estão acostumados a programar em outras lingaguens de programação, se verão tentados a usar <em>loops</em> para tudo. Isso terá de mudar (e irá, naturalmente). Como frisado anteriormente, <em>loops</em> no R são sofrivelmente ineficientes.</p>

<h2 id="tecnicalidades">Tecnicalidades</h2>

<p>Tecnicamente, vetorização nada mais é do que a cultura de se criar e usar funções vetorizadas. Essas funções recebem vetor(es) [x1, …, xn] e devolvem vetor(es) [f(x1), …, f(xn)]. Mas por quê é importante, afinal?</p>

<p>Implementar funções vetorizadas seria uma tarefa simples, não fosse a lentidão dos <em>loops</em>. No R, funções vetorizadas realmente úteis são implementadas nas linguagens de baixo nível, que são muito mais rápidas. Por isso, a não ser que domine C, FORTRAN ou C++, você ficará dependente das funções vetorizadas disponíveis pelo R ou por terceiros.</p>

<h2 id="eficincia">Eficiência</h2>

<p>Abaixo está um exemplo que mostra a diferença de tempo que leva para calcular a raiz quadrada de cada elemento de um vetor de números.</p>

<ul>
  <li>Uma das funções está implementada inteiramente em R utilizando um <em>for</em> para calcular a raiz quadrada em cada elemento do vetor por meio da função <code>sqrt()</code>;</li>
  <li>Uma segunda maneira de efetuar a mesma operação tira proveito da implementação vetorizada em C da função <code>sqrt()</code>.</li>
</ul>

<div class="highlight"><pre><code class="language-r" data-lang="r">x <span class="o">&lt;-</span> <span class="m">1</span><span class="o">:</span><span class="m">1000000</span> <span class="c1"># sequência de inteiros de 1 a 1000000</span>

<span class="c1"># função que calcula a raiz quadrada de cada elemento de um vetor de números</span>
meu_sqrt <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>numeros<span class="p">)</span> <span class="p">{</span>
  resp <span class="o">&lt;-</span> <span class="kt">numeric</span><span class="p">(</span><span class="kp">length</span><span class="p">(</span>numeros<span class="p">))</span>
  <span class="kr">for</span><span class="p">(</span>i <span class="kr">in</span> <span class="kp">seq_along</span><span class="p">(</span>numeros<span class="p">))</span> <span class="p">{</span>
    resp<span class="p">[</span>i<span class="p">]</span> <span class="o">&lt;-</span> <span class="kp">sqrt</span><span class="p">(</span>numeros<span class="p">[</span>i<span class="p">])</span>
  <span class="p">}</span>
  <span class="kr">return</span><span class="p">(</span>resp<span class="p">)</span>
<span class="p">}</span>

<span class="c1"># Comparação de eficiência entre função vetorizada e função &quot;vetorizada no R&quot;</span>
<span class="kp">system.time</span><span class="p">(</span>x2a <span class="o">&lt;-</span> meu_sqrt<span class="p">(</span>x<span class="p">))</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">##   usuário   sistema decorrido 
##     1.188     0.013     1.204</code></pre></div>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kp">system.time</span><span class="p">(</span>x2b <span class="o">&lt;-</span> <span class="kp">sqrt</span><span class="p">(</span>x<span class="p">))</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">##   usuário   sistema decorrido 
##     0.009     0.003     0.012</code></pre></div>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># Verifica que os dois vetores são iguais</span>
<span class="kp">identical</span><span class="p">(</span>x2a<span class="p">,</span> x2b<span class="p">)</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] TRUE</code></pre></div>

<p>Um ganho de 100-200 vezes na eficiência! E as vantagens não param por aí:</p>

<ol>
  <li>Essas funções foram construídas e testadas por pessoas que ganham a vida fazendo isso;</li>
  <li>No R, uma função é “esperta” e funciona para diferentes tipos de objetos que passamos a ela, muitas vezes da forma que esperamos.</li>
</ol>

<h2 id="reciclagem">Reciclagem</h2>

<p>Um conceito que caminha junto com a vetorização é a chamada Reciclagem. Um exemplo ajuda a esclarecer o que isso significa.</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">x <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">5</span><span class="p">)</span>
y <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">10</span><span class="p">,</span><span class="m">100</span><span class="p">,</span><span class="m">1000</span><span class="p">)</span>
x <span class="o">+</span> y</code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1]    2   15  101 1005</code></pre></div>

<p>Neste exemplo estamos somando dois vetores de tamanhos diferentes. Na matemática isso não faz sentido, mas no R faz! E qual convenção se usa para que essa operação seja bem definida? A resposta é Reciclagem. O operador <code>+</code> é uma função vetorizada e que está programado para lidar com quase qualquer tipo de soma que o usuário queira desafiá-lo a fazer. Ao ser incumbido da árdua missão de somar dois vetores de tamanhos diferentes, o <code>+</code> “recicla” os valores do menor vetor, no caso o vetor <code>x</code>, reutilizando seus valores até preencher o vetor maior.</p>

<p>Esta convenção aparece sempre que possível no R e vale tomar cuidado: há vezes em que o R não avisa que reciclou valores.</p>

<h1 id="funes">Funções</h1>

<p>Funções são grandes trunfos das linguagens de programação. Função no R tem a mesma finalidade das funções das demais linguagens: evitar repetir códigos e construir abstrações. Funções deixam o código mais legível, elegante e menos repetitivo. Além disso, funções abstraem uma rotina para casos mais gerais por meio de parâmetros, fazendo-a útil para casos além daquela configuração específica que motivou sua implementação.</p>

<h2 id="estrutura-3">Estrutura</h2>

<div class="highlight"><pre><code class="language-r" data-lang="r">nome_da_funcao <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span><span class="o">&lt;</span>parâmetros<span class="o">&gt;</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1"># faz coisas com os parâmetros</span>
  resultado
<span class="p">}</span>

<span class="c1"># uso da função</span>
nome_da_funcao<span class="p">(</span>param1<span class="p">,</span> param2<span class="p">,</span> <span class="kc">...</span><span class="p">)</span></code></pre></div>

<p>Pontos relevantes:</p>

<ul>
  <li>
    <p>Funções também são objetos! Aliás, tudo que você atribui com <code>&lt;-</code> vira um objeto no R. Assim, é natural pensar que funções podem receber outras funções como argumento e isso é bem comum.</p>
  </li>
  <li>
    <p>Assim que uma função for atribuída a um objeto, use esta função como se ela tivesse vinda com o R: <code>nome_da_funcao(...)</code>.</p>
  </li>
</ul>

<h2 id="parmetros">Parâmetros</h2>

<p>Funções aceitam quaisquer e quantos parâmetros precisar e retorna um objeto, de qualquer tipo, inclusive nada (<code>NULL</code>). No lugar do <code>&lt;parâmetros&gt;</code> você pode colocar nomes que servirão de objetos (número, texto, vetor, lista, etc.) dentro da sua função.</p>

<h3 id="parmetros-opcionais">Parâmetros opcionais</h3>
<p>Parâmetros são objetos cujos valores devem ser atribuídos pelo usuário. Porém, existem parâmetros opcionais, que assumem um dado valor padrão caso o usuário opte por não especificar explicitamente.</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># função que ecoa uma palavra</span>
ecoar <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>palavra<span class="p">,</span> n_ecos <span class="o">=</span> <span class="m">3</span><span class="p">)</span> <span class="p">{</span>
    <span class="kp">paste</span><span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="kp">rep</span><span class="p">(</span>palavra<span class="p">,</span> n_ecos<span class="p">),</span> <span class="s">&quot;!&quot;</span><span class="p">),</span> collapse <span class="o">=</span> <span class="s">&quot; &quot;</span><span class="p">)</span>
<span class="p">}</span></code></pre></div>

<h3 id="parmetros-relativos">Parâmetros relativos</h3>
<p>Além de parâmetros opcionais, podem existir parâmetros cujo valor padrão usa o valor de outro parâmetro. Exemplo:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># Função que desenha um histograma</span>
histograma <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>numeros<span class="p">,</span> xlab <span class="o">=</span> <span class="s">&quot;x&quot;</span><span class="p">,</span> titulo <span class="o">=</span> <span class="kp">paste</span><span class="p">(</span><span class="s">&quot;Histograma de&quot;</span><span class="p">,</span> xlab<span class="p">))</span> <span class="p">{</span>
  hist<span class="p">(</span>numeros<span class="p">,</span> xlab <span class="o">=</span> xlab<span class="p">,</span> main <span class="o">=</span> titulo<span class="p">)</span>
<span class="p">}</span>

<span class="c1"># Simula 1000 medidas de altura de pessoas de uma Normal com média 1,80 e desvio padrão de 0,1.</span>
altura <span class="o">&lt;-</span> rnorm<span class="p">(</span>n <span class="o">=</span> <span class="m">1000</span><span class="p">,</span> mean <span class="o">=</span> <span class="m">1.80</span><span class="p">,</span> sd <span class="o">=</span> <span class="m">0.1</span><span class="p">)</span>
histograma<span class="p">(</span>altura<span class="p">,</span> <span class="s">&quot;altura&quot;</span><span class="p">)</span></code></pre></div>

<p><img src="/images/2016-01-30-aula01/hist1-1.png" alt="plot of chunk hist1" /></p>

<div class="highlight"><pre><code class="language-r" data-lang="r">histograma<span class="p">(</span>altura<span class="p">,</span> <span class="s">&quot;altura&quot;</span><span class="p">,</span> <span class="s">&quot;Eu escolho o título que eu quiser&quot;</span><span class="p">)</span></code></pre></div>

<p><img src="/images/2016-01-30-aula01/hist1-2.png" alt="plot of chunk hist1" /></p>

<p>O parâmetro <code>xlab</code> define o título do eixo x enquanto <code>titulo</code> escreve o título principal do gráfico. Este último irá utilizar o nome passado para o eixo x para criar o seu valor padrão.</p>

<h3 id="ordem-ou-nome">Ordem ou nome</h3>
<p>Podemos passar valores aos parâmetros explicitamente ou implicitamente. Passar valor explicitamente significa associar o valor desejado ao nome do parâmetro. Por exemplo, no código <code>rnorm(n = 1000, mean = 1.80, sd = 0.1)</code> está claro qual valor será passado para cada parâmetro. Se quisermos omitir os nomes dos parâmetros, as funções terão a boa vontade de deduzir a qual parâmetro você deseja atribuir certo valor e isso é feito utilizando a ORDEM dos parâmetros definidos na criação da função. No comando <code>histograma(altura, "altura")</code> nenhum parâmetro foi diretamente definido, mas pela ordem, o vetor <code>altura</code> foi atribuído ao parâmetro <code>numeros</code> e a <em>string</em> <code>"altura"</code> foi atribuída ao parâmetro <code>xlab</code> da função <code>histograma()</code>. A versão “explícita” desse comando seria <code>histograma(numeros = altura, xlab = "altura")</code>.</p>

<p><strong>OBS:</strong> Misturar as formas, explícitas e implícitas, também funciona e versões explícitas aceitam que os parâmetros sejam passados fora de ordem. A expressão <code>histograma(xlab = "altura", altura)</code> daria certo também!</p>

<p><strong>OBS 2:</strong> Se não for ambíguo, o R aceita que apenas parte do nome do parâmetro seja passado. No nosso exemplo, <code>histograma(altura, t = "Eu escolho o título que eu quiser", x = "altura")</code> levaria ao mesmo resultado que todos os citados até aqui.</p>

<h3 id="parmetro-">Parâmetro “…”</h3>

<p>Existe um parâmetro especial e frequentemente disponível em funções que é simbolizado por três pontinhos “…”. Esse argumento indica que pode ser passado um número variável de parâmetros e que, geralmente, estes serão repassados para outras funções.</p>

<p>Uma utilidade é quando você deseja fazer possível mexer nos parâmetros de uma função, mas não quer copiar todos os seus parâmetros novamente. Retomemos o exemplo da função <code>histograma()</code>:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">histograma <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>numeros<span class="p">,</span> xlab <span class="o">=</span> <span class="s">&quot;x&quot;</span><span class="p">,</span> titulo <span class="o">=</span> <span class="kp">paste</span><span class="p">(</span><span class="s">&quot;Histograma de&quot;</span><span class="p">,</span> xlab<span class="p">),</span> <span class="kc">...</span><span class="p">)</span> <span class="p">{</span>
  hist<span class="p">(</span>numeros<span class="p">,</span> xlab <span class="o">=</span> xlab<span class="p">,</span> main <span class="o">=</span> titulo<span class="p">,</span> <span class="kc">...</span><span class="p">)</span>
<span class="p">}</span>

histograma<span class="p">(</span>altura<span class="p">,</span> breaks <span class="o">=</span> <span class="m">100</span><span class="p">,</span> col <span class="o">=</span> <span class="m">2</span><span class="p">)</span></code></pre></div>

<p><img src="/images/2016-01-30-aula01/hist2-1.png" alt="plot of chunk hist2" /></p>

<p>Repare que nunca precisamos definir os parâmetros <code>breaks</code> e <code>col</code> na função <code>histograma()</code>. O … fez o trabalho de enviar essas informações à função <code>hist()</code>.</p>

<p>Um segundo cenário que … se faz útil é quando uma função aceita um número indefinido de argumentos. Um exemplo disso é a função <code>paste()</code>, que concatena palavras. A ela, podemos passar quantas palavras quisermos. Não fosse o …, teríamos que ter os parâmetros <code>(palavra1, palavra2, palavra3, ...)</code>. Sem chances.</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kp">args</span><span class="p">(</span><span class="kp">paste</span><span class="p">)</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## function (..., sep = &quot; &quot;, collapse = NULL) 
## NULL</code></pre></div>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kp">paste</span><span class="p">(</span><span class="s">&quot;Eu&quot;</span><span class="p">,</span> <span class="s">&quot;sou&quot;</span><span class="p">,</span> <span class="s">&quot;o&quot;</span><span class="p">,</span> <span class="s">&quot;capitão&quot;</span><span class="p">,</span> <span class="s">&quot;planeta&quot;</span><span class="p">)</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] &quot;Eu sou o capitão planeta&quot;</code></pre></div>

<h2 id="funes-annimas">Funções anônimas</h2>

<p>As funções anônimas são frequentemente utilizadas e têm essa denominação pois não nos damos o trabalho de defini-las como um objeto permanente no nosso ambiente de trabalho. Veja o exemplo abaixo:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">nums <span class="o">&lt;-</span> <span class="m">1</span><span class="o">:</span><span class="m">10</span>

eh_par <span class="o">&lt;-</span> <span class="kp">sapply</span><span class="p">(</span>nums<span class="p">,</span> <span class="kr">function</span><span class="p">(</span>numero<span class="p">)</span> <span class="p">{</span>numero <span class="o">%%</span> <span class="m">2</span> <span class="o">==</span> <span class="m">0</span><span class="p">})</span>

<span class="kp">cbind</span><span class="p">(</span>nums<span class="p">,</span> eh_par<span class="p">)</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">##       nums eh_par
##  [1,]    1      0
##  [2,]    2      1
##  [3,]    3      0
##  [4,]    4      1
##  [5,]    5      0
##  [6,]    6      1
##  [7,]    7      0
##  [8,]    8      1
##  [9,]    9      0
## [10,]   10      1</code></pre></div>

<p>Não se preocupe em entender tudo o que o código acima está fazendo, você aprenderá adiante tudo sobre a função <code>sapply()</code> e <code>cbind()</code>. O ponto deste exemplo está na parte <code>function(numero) {numero %% 2 == 0}</code>. Este pedaço de código define uma função, mas essa função não tem nome! Apesar disso, ela continua sendo um objeto e pode ser passada como parâmetro de função, assim como faríamos com números, textos e vetores. Caso a função fosse útil em outros contextos ou tivesse que ser repetida em outra parte do código, poderíamos guardá-la no ambiente de trabalho, como mostra o exemplo que segue:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">testa_se_eh_par <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>numero<span class="p">)</span> <span class="p">{</span>
  numero <span class="o">%%</span> <span class="m">2</span> <span class="o">==</span> <span class="m">0</span>
<span class="p">}</span>

eh_par <span class="o">&lt;-</span> <span class="kp">sapply</span><span class="p">(</span>nums<span class="p">,</span> testa_se_eh_par<span class="p">)</span></code></pre></div>

<p>O resultado é idêntico como deveria ser, mas agora a função tem nome e pode ser utilizada conforme a conveniência.</p>

<h2 id="escopo">Escopo</h2>

<p>Objetos moram em <strong>ambientes</strong> (<em>environments</em>) e as funções as procuram os objetos que precisam usar nesses <em>environments</em>.</p>

<p>A ordem de procura segue a regra do mais específico até o ambiente global (<code>.GlobalEnv</code>) e se nada for encontrado, retorna um erro informando que não existe tal objeto.</p>

<p>Se houver dois objetos com o mesmo nome, prevalece aquele mais específico (o primeiro que for encontrado).</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="p">(</span>x <span class="o">&lt;-</span> <span class="kp">exp</span><span class="p">(</span><span class="m">1</span><span class="p">))</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] 2.718282</code></pre></div>

<div class="highlight"><pre><code class="language-r" data-lang="r">f <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>x<span class="p">)</span> <span class="kp">print</span><span class="p">(</span>x<span class="p">)</span>
f<span class="p">(</span><span class="m">2</span><span class="p">)</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] 2</code></pre></div>

<div class="highlight"><pre><code class="language-r" data-lang="r">g <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>y<span class="p">)</span> <span class="kp">print</span><span class="p">(</span>x<span class="p">)</span>
g<span class="p">(</span><span class="m">2</span><span class="p">)</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] 2.718282</code></pre></div>

<p>No exemplo acima, o objeto <code>x</code> existe tanto fora, quanto dentro da função <code>f()</code>. Ao ser chamado para ser usado na função <code>print(x)</code>, o objeto utilizado foi aquele que estava dentro do ambiente da função, que no caso foi atribuído com o valor <code>2</code>.</p>

<p>O <code>x</code> que vale <code>exp(1)</code> está morando no <em>global envirnment</em> (<code>.GlobalEnv</code>) e seria utilizado apenas no caso em que nenhum outro <code>x</code> estivesse no caminho.</p>

<p>Na função <code>g()</code>, não existe mais o objeto <code>x</code> dentro dela (trocamos por <code>y</code>). O único objeto que está dentro de lá é o <code>y</code>. Como ainda chamamos pelo <code>x</code> dentro da função, o R irá buscar por ele, onde quer que ele esteja.</p>

<h1 id="variveis-aleatrias">Variáveis Aleatórias</h1>

<p>No R é muito fácil calcular f.d.p’s, f.d.a’s, quantis e até mesmo simular variáveis aleatórias das mais consagradas distribuições de probabilidade. O nome dessas funções segue um padrão que chamamos de funções (d, p, q, r). Exemplo para a distribuição Normal:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">dnorm<span class="p">(</span>x<span class="p">,</span> mean <span class="o">=</span> <span class="m">0</span><span class="p">,</span> sd <span class="o">=</span> <span class="m">1</span><span class="p">,</span> log <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span>
pnorm<span class="p">(</span><span class="kp">q</span><span class="p">,</span> mean <span class="o">=</span> <span class="m">0</span><span class="p">,</span> sd <span class="o">=</span> <span class="m">1</span><span class="p">,</span> lower.tail <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span> log.p <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span>
qnorm<span class="p">(</span>p<span class="p">,</span> mean <span class="o">=</span> <span class="m">0</span><span class="p">,</span> sd <span class="o">=</span> <span class="m">1</span><span class="p">,</span> lower.tail <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span> log.p <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span>
rnorm<span class="p">(</span>n<span class="p">,</span> mean <span class="o">=</span> <span class="m">0</span><span class="p">,</span> sd <span class="o">=</span> <span class="m">1</span><span class="p">)</span></code></pre></div>

<p>Repare nas 4 letras que antecedem <code>norm</code> nos nomes das funções. Essas letras significam:</p>

<ul>
  <li><strong>d</strong> (“density”) Densidade da Normal, ou f.d.p da Normal;</li>
  <li><strong>p</strong> (“probability”) Função de distribuição acumulada (f.d.a) da Normal;</li>
  <li><strong>q</strong> (“quantile”) Quantil da Normal;</li>
  <li><strong>r</strong> (“random”) Gera um número vindo de uma Normal.</li>
</ul>

<p>No lugar de <code>norm</code>, você pode trocar por outra distribuição de probabilidade. A tabela abaixo lista algumas das possibilidades:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Distribuição</th>
      <th style="text-align: center">Apelido</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">Normal</td>
      <td style="text-align: center">norm</td>
    </tr>
    <tr>
      <td style="text-align: center">Uniforme</td>
      <td style="text-align: center">unif</td>
    </tr>
    <tr>
      <td style="text-align: center">Beta</td>
      <td style="text-align: center">beta</td>
    </tr>
    <tr>
      <td style="text-align: center">Chi Quadrado</td>
      <td style="text-align: center">chisq</td>
    </tr>
    <tr>
      <td style="text-align: center">Exponencial</td>
      <td style="text-align: center">exp</td>
    </tr>
    <tr>
      <td style="text-align: center">F de Snedecor</td>
      <td style="text-align: center">f</td>
    </tr>
    <tr>
      <td style="text-align: center">Gama</td>
      <td style="text-align: center">gamma</td>
    </tr>
    <tr>
      <td style="text-align: center">Poisson</td>
      <td style="text-align: center">pois</td>
    </tr>
  </tbody>
</table>

<p>Para consultar a lista completa de distribuições da família (d, p, q, r), rode no console <code>?Distributions</code>.</p>

<h1 id="vocabulrio">Vocabulário</h1>

<h2 id="trigonometria">Trigonometria</h2>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Função</th>
      <th style="text-align: center">Descrição</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">cos(x) / sin(x) / tan(x)</td>
      <td style="text-align: center">seno/cosseno/tangente de x</td>
    </tr>
    <tr>
      <td style="text-align: center">acos(x) / asin(x) / atan(x)</td>
      <td style="text-align: center">arco-seno/cosseno/tangente de x</td>
    </tr>
  </tbody>
</table>

<h2 id="matemtica">Matemática</h2>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Função</th>
      <th style="text-align: center">Descrição</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">log(x)</td>
      <td style="text-align: center">Logaritmo natural de x</td>
    </tr>
    <tr>
      <td style="text-align: center">exp(x)</td>
      <td style="text-align: center">e elevado a x</td>
    </tr>
    <tr>
      <td style="text-align: center">abs(x)</td>
      <td style="text-align: center">valor absoluto de x</td>
    </tr>
    <tr>
      <td style="text-align: center">sign(x)</td>
      <td style="text-align: center">sinal de x (1 ou -1)</td>
    </tr>
    <tr>
      <td style="text-align: center">sqrt(x)</td>
      <td style="text-align: center">raiz quadrada de x</td>
    </tr>
    <tr>
      <td style="text-align: center">choose(n, k)</td>
      <td style="text-align: center">combinações de n, k a k</td>
    </tr>
    <tr>
      <td style="text-align: center">factorial(x)</td>
      <td style="text-align: center">fatorial de x</td>
    </tr>
  </tbody>
</table>

<h2 id="estatstica">Estatística</h2>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Função</th>
      <th style="text-align: center">Descrição</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">mean(x)</td>
      <td style="text-align: center">Média de x</td>
    </tr>
    <tr>
      <td style="text-align: center">var(x) / sd(x)</td>
      <td style="text-align: center">Variância / Desvio Padrão amostral de x</td>
    </tr>
    <tr>
      <td style="text-align: center">quantile(x)</td>
      <td style="text-align: center">Quantis de x</td>
    </tr>
    <tr>
      <td style="text-align: center">cov(x, y) / cor(x, y)</td>
      <td style="text-align: center">Covariância / Correlação linear entre x e y</td>
    </tr>
  </tbody>
</table>

<h2 id="diversos">Diversos</h2>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Função</th>
      <th style="text-align: center">Descrição</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">x:y</td>
      <td style="text-align: center">Sequencia de x até y</td>
    </tr>
    <tr>
      <td style="text-align: center">x=y</td>
      <td style="text-align: center">x recebe y (atribuição)</td>
    </tr>
    <tr>
      <td style="text-align: center">?x</td>
      <td style="text-align: center">documentação de x</td>
    </tr>
    <tr>
      <td style="text-align: center">x$y</td>
      <td style="text-align: center">extração de y do objeto x</td>
    </tr>
    <tr>
      <td style="text-align: center">x%*%y</td>
      <td style="text-align: center">Multiplicação matricial das matrizes x e y</td>
    </tr>
  </tbody>
</table>

<h1 id="referncias">Referências</h1>

<p>http://adv-r.had.co.nz/Functions.html</p>

<p>http://www.burns-stat.com/pages/Tutor/R_inferno.pdf</p>

      </article>
      <hr>
        <div class="bdsharebuttonbox">
            <a href="#" class="bds_more" data-cmd="more"></a>
            <a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
            <a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a>
            <a href="#" class="bds_douban" data-cmd="douban" title="分享到豆瓣网"></a>
            <a href="#" class="bds_fbook" data-cmd="fbook" title="Share to Facebook"></a>
            <a href="#" class="bds_copy" data-cmd="copy" title="分享到复制网址"></a>
        </div>
        <script>
            window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"1","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
        </script>
    </div>
	
    <!-- duoshuo.com javascript include code. -->    
    
    <!-- disqus.com javascript include code. -->
	
    <div class="post-area post comment">
        <div id="disqus_thread"></div>
    </div>
	<script>
		var disqus_config = function () {
			this.page.url = "http://curso-r.github.io/aula01/"; 
			this.page.identifier = "/aula01"; 
		};
		(function() {
			var d = document, s = d.createElement('script');
			s.src = '//curso-r.disqus.com/embed.js';
			s.setAttribute('data-timestamp', +new Date());
			(d.head || d.body).appendChild(s);
		})();
	</script>
	
    
  </div>
  
  <div id="content" class="col-sm-3">
    <!-- <div id="myAffix" class="shadow-bottom-center hidden-xs" data-spy="affix" data-offset-top="0" data-offset-bottom="-20"> -->
    <div id="myAffix" class="shadow-bottom-center hidden-xs" >
      <div class="categories-list-header">
        Content
      </div>
      <div class="content-text"></div>
    </div>
  </div>
  
</div>
    </div>

    
    <div id="top" data-toggle="tooltip" data-placement="left" title="back to top">
      <a href="javascript:;">
        <div class="arrow"></div>
        <div class="stick"></div>
      </a>
    </div>

    <footer class="">
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <a href="mailto:"><span class="glyphicon glyphicon-envelope"></span> </a>
        <span class="point"> · </span>
        
          <a href="https://github.com/curso-r">
            <span class="icon">
              <svg viewBox="0 0 16 16">
                <path fill="#aaa" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
              </svg>
            </span>
            Github
            <!-- <span>curso-r</span> -->
          </a>
          
          <span class="point"> · </span>
          <span><a href="https://github.com/curso-r/curso-r.github.io/blob/master/_posts/2016-01-30-aula01.md">View source</a></span>
          <span class="point"> · </span>
          <span><a class="newpost" href="javascript:;">New post</a></span>
		  <span class="point"> · </span>
          <span><a href="/feed.xml">RSS</a></span>
          <span class="point"> · </span>
          <span>&copy; 2015 LiXizhi</span>
      </div>
    </div>
  </div>
</footer>

    <script type="text/javascript">
    function OnClickNewPost()
    {
        var title = prompt("Please enter title of your post");
        if (title!=null){
            title = title.replace(" ", "-");
            var currentdate = new Date();
            var urlNewPage = "https://github.com/curso-r/curso-r.github.io/new/master?filename=_posts/" 
                + currentdate.getFullYear() + "-" + (currentdate.getMonth()+1) + "-" + currentdate.getDate() + "-" + title + ".md";
                
            var defaultText =  [
                '---',
                'layout: post',
                'comments: true',
                'categories: diary',
                '---',
                '## Title',
                'text'
                ].join('\n');
            urlNewPage += "&value=" + encodeURIComponent(defaultText);
            window.open(urlNewPage);
        }
    }
    
    $(function() {
      // CreateNewPostLinks
      $('.newpost').each(function(){
          $(this).click(OnClickNewPost);
      });
    });
</script>
  
  </body>
</html>
